<div class="container-fluid">
  <ng-template #show>
    <div class="row">
      <div class="col-sm-3 bg-dark">
        <nav class="navbar">
          <ul class="navbar-nav">
            <li class="nav-item">
              <h6><a class="nav-link active" (click)="filterBySubCategory('')">{{categoryName|uppercase}}</a></h6>
            </li>
            <div class="dropdown-divider"></div>
            <li class="nav-item" *ngFor="let subItem of subCategoryList">
              <a class="nav-link" (click)="filterBySubCategory(subItem.name)">{{subItem.name|titlecase}}</a>
              <!-- <div class="dropdown-divider"></div>    -->
            </li>
          </ul>
        </nav>
      </div>
      <div class="col-sm-9">
        <div class="container-fluid">
          <p> category id: {{categoryName}}</p>
          <div class="row m-3" *ngIf="subcategoryName!=''">
            <div class="col-sm-6">
              <p class="title p-2 text-center">{{subcategoryName|titlecase}}</p>
            </div>
          </div>
          <div class="row">
          </div>
          <div class="row m-4 p-2">
            <div class="col-sm" *ngFor="let product of productsList|paginate : {
                itemsPerPage: tableSize,
                currentPage: page,
                totalItems: count
              };let i = index">
              <app-popular-card [product]="product"></app-popular-card>
            </div>
          </div>
          <!-- pagination -->
          <div class="row pagination">
            <div class="mt-4 mx-auto">
              <pagination-controls (pageChange)="onTableDataChange($event)">
              </pagination-controls>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  
  <ng-template #spinner>
    <div class="row mx-auto">
      <div class="container d-flex justify-content-center align-items-center p-5">
        <app-spinner></app-spinner>
        
      </div>
    </div>
  </ng-template>
  <ng-container *ngIf="loadingPage then show; else spinner"></ng-container>
  
</div>

<!-- <div class="container">
  <ng-template #show>
    <div class="row m-4 mx-auto">
      <div class="col-sm-6 ">
        <h4 class="title p-2 text-center ">{{categoryName|uppercase}}</h4>
      </div>
    </div>
    <br>
    <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#allProducts"
          (click)="filterBySubCategory('')">{{'All'|titlecase}}</a>
      </li>
      <li class="nav-item" *ngFor="let subItem of subCategoryList">
        <a class="nav-link" data-toggle="tab" (click)="filterBySubCategory(subItem.name)"
          [href]="'#'+subItem.name">{{subItem.name|titlecase}} </a>
      </li>
    </ul>
   
    <div class="tab-content">
      <div id="allproducts" class="container tab-pane active"><br>
        <ng-container *ngTemplateOutlet="showContainer"></ng-container>
      </div>
      <div [id]="subCategory" class="container tab-pane fade"><br>
        {{subCategory}}
        <ng-container *ngTemplateOutlet="showContainer"></ng-container>
      </div>
    </div>
  </ng-template>
  <ng-template #spinner>
   <div class="row d-flex justify-content-center align-items-center" style="height: 15rem;" >
    <app-spinner></app-spinner>
   </div>
  </ng-template>
  <ng-container *ngIf="loading then show;else spinner"></ng-container>
  
</div>

<ng-template #showContainer>
  <div class="container">
    <div class="row m-4 p-2">
      <div class="col-sm" *ngFor="let product of productsList|paginate : {
        itemsPerPage: tableSize,
        currentPage: page,
        totalItems: count
      };let i = index">
        <app-product-card [product]="product"></app-product-card>
      </div>
    </div>
    <div class="row pagination">
      <div class="mt-4 mx-auto">
        <pagination-controls (pageChange)="onTableDataChange($event)">
        </pagination-controls>
      </div>
    </div>
  </div>
</ng-template> -->